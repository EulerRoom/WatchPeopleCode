{% extends "bootstrap/base.html" %}  
{% import "bootstrap/wtf.html" as wtf %}

{% block html_attribs %} lang="en"{% endblock html_attribs %}

{% block styles %}
  {{super()}}
  <link rel="stylesheet" href="{{url_for('static', filename='index.css')}}">
{% endblock %}

{% block title %}Watch people code{% endblock %}

{% include 'flashed_messages.html' %}

{% block content %}
  <div class="container">
    <h1 class="text-center"> Alpha version of <a href="http://www.reddit.com/r/WatchPeopleCode/">/r/WatchPeopleCode</a> app </h1>
    {% if live_streams is not none %}
        <h2 class="text-center"> Livestreams available: {{live_streams|length}}</h2>
    {% else %}
        <h2 class="text-center"> Error getting live streams. :( Maybe try refreshing the page? </h2>
    {% endif %}
    <p class="text-center"><a href="https://docs.google.com/spreadsheets/d/1ANp6WewbBsFKuIPy0lybki8UldhXSd29LjcjS2PNCjU/">Big list of past streams</a></p>
      <div class="col-md-8">
        {% if live_streams %}
            {% for stream in live_streams %}
              {{ stream.html_code() |safe }}
            {% endfor %}
        {% else %}
          <h3>How about watching a recording of a past stream? </h3>
          {{ random_past_stream.html_code() | safe }}
        {% endif %}
      </div>
      <div class="col-md-4">
        <form action="" method="POST" class="form form-subscribe" role="form">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h1 class="panel-title">Subscribe to mailing list</h1>
            </div>

            <div class="panel-body">
              <div class="form-group">
                {{ form.hidden_tag() }}
                {{ wtf.form_field(form.email, value="") }}
                {{ wtf.form_field(form.submit_button, button_map={'submit_button': 'primary'}) }}
              </div>
            </div>
          </div>
        </form>
    </div>
  </div>

  <a href="https://github.com/eleweek/WatchPeopleCode"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
{% endblock %}
